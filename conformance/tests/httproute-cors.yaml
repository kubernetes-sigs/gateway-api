apiVersion: gateway.networking.k8s.io/v1
kind: HTTPRoute
metadata:
  name: cors
  namespace: gateway-conformance-infra
spec:
  parentRefs:
    - name: same-namespace
  rules:
    - matches:
        - path:
            type: PathPrefix
            value: /one
      filters:
        - type: CORS
          cors:
            allowOrigins:
              - http://one.example.com
              - http://example.com
              - https://example.com
            allowMethods:
              - GET
              - HEAD
              - POST
            allowHeaders:
              - Accept
              - Accept-Language
              - Content-Language
              - Content-Type
              - Range
      backendRefs:
        - name: infra-backend-v1
          port: 8080
    - matches:
        - path:
            type: PathPrefix
            value: /two
      filters:
        - type: CORS
          cors:
            allowOrigins:
              - http://two.example.com
              - http://example.com
            allowMethods:
              - GET
              - HEAD
              - POST
              - DELETE
            allowCredentials: true
            exposeHeaders:
              - Content-Security-Policy
            maxAge: 1728000
      backendRefs:
        - name: infra-backend-v1
          port: 8080